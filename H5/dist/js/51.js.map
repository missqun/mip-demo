{"version":3,"sources":["webpack:///./src/pages/Room.vue?0551","webpack:///./src/pages/Room.vue","webpack:///./src/pages/Room.vue?fd8a"],"names":["mounted","$store","dispatch","axios","get","config","postUrl","headers","appkey","then","data","res","chatroomInfos","roomCount","roomList","msg","list","map","item","onlineusercount","value","Number","toFixed","album","resourceUrl","announcement","roomid","roomTotal","total","alert","errorMsg","catch","err","methods","enterRoom","chatroomId","location","href"],"mappings":";;;;;;;;;;AAAA,gBAAgB,mBAAO,CAAC,oDAAyD;AACjF;AACA,EAAE,mBAAO,CAAC,+HAA6I;AACvJ;AACA,EAAE,mBAAO,CAAC,wPAAgS;AAC1S;AACA;AACA;AACA;AACA;AACA;AACA,+EAA+E,iDAAiD,IAAI;AACpI,mCAAmC;;AAEnC;AACA,IAAI,KAAU,GAAG;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,CAAC;;AAED;;;;;;;;;;;;;;;;;;ACRA;;;;AACA;;;;;;kBAEe;AACbA,SADa,qBACF;AAAA;;AACT,SAAKC,MAAL,CAAYC,QAAZ,CAAqB,aAArB;AACAC,oBAAMC,GAAN,CACKC,kBAAOC,OADZ,6BAEE;AACEC,eAAS;AACP,kBAAUF,kBAAOG,MADV;AAEP,wBAAgB;AAFT;AADX,KAFF,EAQEC,IARF,CAQO,eAAO;AACZ,UAAIC,OAAOC,IAAID,IAAf;AACA,UAAIA,KAAKC,GAAL,KAAa,GAAjB,EAAsB;AACpB,YAAIC,gBAAgB,EAApB;AACA,YAAIC,YAAY,CAAhB;AACA,cAAKC,QAAL,GAAgBJ,KAAKK,GAAL,CAASC,IAAT,CAAcC,GAAd,CAAkB,gBAAQ;AACxC,cAAGC,KAAKC,eAAL,GAAuB,KAA1B,EAAgC;AAC9B,gBAAIC,QAAQ,IAAIC,MAAJ,CAAWH,KAAKC,eAAL,GAAqB,KAAhC,CAAZ;AACAD,iBAAKC,eAAL,GAAuBC,MAAME,OAAN,CAAc,CAAd,IAAmB,GAA1C;AACD,WAHD,MAGO;AACLJ,iBAAKC,eAAL,GAAuBD,KAAKC,eAAL,IAAwB,CAA/C;AACD;AACDD,eAAKK,KAAL,GAAgBlB,kBAAOmB,WAAvB,uBAAoDX,SAApD;AACAK,eAAKO,YAAL,GAAoBP,KAAKO,YAAL,IAAqB,GAAzC;;AAEAb,wBAAcM,KAAKQ,MAAnB,IAA6BR,IAA7B;AACAL;AACA,iBAAOK,IAAP;AACD,SAbe,CAAhB;AAcA,cAAKS,SAAL,GAAiBjB,KAAKK,GAAL,CAASa,KAA1B;;AAEA,cAAK3B,MAAL,CAAYC,QAAZ,CAAqB,mBAArB,EAA0CU,aAA1C;AACD,OApBD,MAoBO;AACLiB,cAAM,MAAKC,QAAX;AACD;AACD,YAAK7B,MAAL,CAAYC,QAAZ,CAAqB,aAArB;AACD,KAlCD,EAkCG6B,KAlCH,CAkCS,eAAO;AACdF,YAAMG,GAAN;AACA,YAAK/B,MAAL,CAAYC,QAAZ,CAAqB,aAArB;AACD,KArCD;AAsCD,GAzCY;AA0CbQ,MA1Ca,kBA0CL;AACN,WAAO;AACLI,gBAAU,EADL;AAELa,iBAAW;AAFN,KAAP;AAID,GA/CY;;AAgDbM,WAAS;AACPC,aADO,qBACIC,UADJ,EACgB;AACrBC,eAASC,IAAT,mBAA8BF,UAA9B;AACD;AAHM;AAhDI,C;;;;;;;;;;;;;ACtBf,gBAAgB,mBAAmB,aAAa,0BAA0B;AAC1E;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL,GAAG;AACH,CAAC;AACD;AACA,IAAI,KAAU;AACd;AACA;AACA;AACA;AACA,C","file":"51.js","sourcesContent":["var Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vux-loader/src/script-loader.js!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Room.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-350169b5\\\"}!../../node_modules/vux-loader/src/before-template-compiler-loader.js!../../node_modules/vux-loader/src/template-loader.js!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Room.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\nComponent.options.__file = \"D:\\\\project\\\\H5\\\\src\\\\pages\\\\Room.vue\"\nif (Component.esModule && Object.keys(Component.esModule).some(function (key) {return key !== \"default\" && key !== \"__esModule\"})) {console.error(\"named exports are not supported in *.vue files.\")}\nif (Component.options.functional) {console.error(\"[vue-loader] Room.vue: functional components are not supported with templates, they should use render functions.\")}\n\n/* hot reload */\nif (module.hot) {(function () {\n  var hotAPI = require(\"vue-hot-reload-api\")\n  hotAPI.install(require(\"vue\"), false)\n  if (!hotAPI.compatible) return\n  module.hot.accept()\n  if (!module.hot.data) {\n    hotAPI.createRecord(\"data-v-350169b5\", Component.options)\n  } else {\n    hotAPI.reload(\"data-v-350169b5\", Component.options)\n  }\n})()}\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/Room.vue\n// module id = 465\n// module chunks = 51","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport axios from 'axios'\nimport config from '../configs'\n\nexport default {\n  mounted () {\n    this.$store.dispatch('showLoading')\n    axios.get(\n      `${config.postUrl}/api/chatroom/homeList`,\n      {\n        headers: {\n          'appkey': config.appkey,\n          'content-type': 'application/json',\n        }\n      }\n    ).then(res => {\n      let data = res.data\n      if (data.res === 200) {\n        let chatroomInfos = {}\n        let roomCount = 0\n        this.roomList = data.msg.list.map(item => {\n          if(item.onlineusercount > 10000){\n            let value = new Number(item.onlineusercount/10000)\n            item.onlineusercount = value.toFixed(1) + '万'\n          } else {\n            item.onlineusercount = item.onlineusercount || 0\n          }\n          item.album = `${config.resourceUrl}/chatroom/image${roomCount}.png`\n          item.announcement = item.announcement || ' '\n          // 用于初始化\n          chatroomInfos[item.roomid] = item\n          roomCount++\n          return item\n        })\n        this.roomTotal = data.msg.total\n        // 用于demo设置封面\n        this.$store.dispatch('initChatroomInfos', chatroomInfos)\n      } else {\n        alert(this.errorMsg)\n      }\n      this.$store.dispatch('hideLoading')\n    }).catch(err => {\n      alert(err)\n      this.$store.dispatch('hideLoading')\n    })\n  },\n  data () {\n    return {\n      roomList: [],\n      roomTotal: 0\n    }\n  },\n  methods: {\n    enterRoom (chatroomId) {\n      location.href = `#/roomChat/${chatroomId}`\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/Room.vue","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"g-inherit m-main\"\n  }, [_c('div', {\n    staticClass: \"m-room-entry g-flex-c\"\n  }, _vm._l((_vm.roomList), function(item) {\n    return _c('span', {\n      staticClass: \"u-box\",\n      on: {\n        \"click\": function($event) {\n          _vm.enterRoom(item.roomid)\n        }\n      }\n    }, [_c('div', {\n      staticClass: \"album\"\n    }, [_c('img', {\n      staticClass: \"pic\",\n      attrs: {\n        \"src\": item.album\n      }\n    }), _vm._v(\" \"), _c('div', {\n      staticClass: \"status\"\n    }, [(item.status === 1) ? _c('strong', [_vm._v(\"正在直播\")]) : _vm._e(), _vm._v(\" \"), _c('em', [_vm._v(_vm._s(item.onlineusercount) + \" 人\")])])]), _vm._v(\" \"), _c('p', {\n      staticClass: \"desc\"\n    }, [_vm._v(_vm._s(item.name))])])\n  }), 0)])\n},staticRenderFns: []}\nmodule.exports.render._withStripped = true\nif (module.hot) {\n  module.hot.accept()\n  if (module.hot.data) {\n     require(\"vue-hot-reload-api\").rerender(\"data-v-350169b5\", module.exports)\n  }\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-350169b5\"}!./~/vux-loader/src/before-template-compiler-loader.js!./~/vux-loader/src/template-loader.js!./~/vue-loader/lib/selector.js?type=template&index=0!./src/pages/Room.vue\n// module id = 680\n// module chunks = 51"],"sourceRoot":""}